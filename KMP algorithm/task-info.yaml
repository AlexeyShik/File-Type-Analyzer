type: edu
custom_name: stage2
files:
- name: test/ContainsSearch.java
  visible: false
  text: |
    public class ContainsSearch {
        public static long searchForPattern(String[] args) {
            String pattern = args[1];
            String patternName = args[2];
            String fileContent = args[0];
            String unknownFileType = "Unknown file type";
            long timeStart = System.nanoTime();
            if (fileContent.contains(pattern) /*!kmpSearch(fileContent.toString(), pattern).isEmpty()*/) {
                return System.nanoTime() - timeStart;
            }
            return 0;
        }
    }
  learner_created: false
- name: test/MainTest.java
  visible: false
  text: |2

    import analyzer.Main;
    import org.hyperskill.hstest.stage.StageTest;
    import org.hyperskill.hstest.testcase.CheckResult;
    import org.hyperskill.hstest.testcase.TestCase;
    import org.junit.BeforeClass;

    import java.util.List;

    public class MainTest extends StageTest<Clue> {
        static String largeContent;

        String pdf = "PDF document";
        String doc = "DOC document";
        String unknown = "Unknown file type";
        String file = "doc.pdf";

        public MainTest() throws Exception {
            super(Main.class);
        }

        @Override
        public List<TestCase<Clue>> generate() {
            return List.of(
                new TestCase<Clue>()
                    .addArguments(new String[] {
                            "--naive",
                            file,
                            "%PDF%PDF%PDF%PDF%PDF%PDF%PDF%PDF%PDF%PDF%PDF%PDF%PDF%PDF%PDF%PDF-",
                            pdf
                        })
                    .addFile(file, largeContent)
                    .setAttach(new Clue(pdf)),

                new TestCase<Clue>()
                    .addArguments(new String[] {
                            "--KMP",
                            file,
                            "%PDF%PDF%PDF%PDF%PDF%PDF%PDF%PDF%PDF%PDF%PDF%PDF%PDF%PDF%PDF%PDF-",
                            doc
                        })
                    .addFile(file, largeContent)
                    .setAttach(new Clue(doc)),

                new TestCase<Clue>()
                    .addArguments(new String[] {
                            "--naive",
                            file,
                            "%PDF%PDF%PDF%PDF%PDF%PDF%PDF%PDF%PDF%PDF%PDF%PDF%PDF%PDF%PDF%PDF+",
                            unknown
                        })
                    .addFile(file, largeContent)
                    .setAttach(new Clue(unknown)),

                new TestCase<Clue>()
                    .addArguments(new String[] {
                            "--KMP",
                            file,
                            "%PDF%PDF%PDF%PDF%PDF%PDF%PDF%PDF%PDF%PDF%PDF%PDF%PDF%PDF%PDF%PDF+",
                            unknown
                        })
                    .addFile(file, largeContent)
                    .setAttach(new Clue(unknown))
            );
        }

        @Override
        public CheckResult check(String reply, Clue clue) {
            reply = reply.strip();

            if (reply.contains(doc) && reply.contains(pdf)) {
                return CheckResult.wrong("There are both \"" + doc + "\" and \"" + pdf + "\"" +
                    " in output, should be only one of them");
            } else if (reply.contains(doc) && reply.contains(unknown)) {
                return CheckResult.wrong("There are both \"" + doc + "\" and \"" + unknown + "\"" +
                    " in output, should be only one of them");
            } else if (reply.contains(pdf) && reply.contains(unknown)) {
                return CheckResult.wrong("There are both \"" + pdf + "\" and \"" + unknown + "\"" +
                    " in output, should be only one of them");
            }

            if (!reply.contains(clue.response)) {
                return CheckResult.wrong("Your output does not contain \"" + clue.response + "\", but should." +
                    "\n\nYour output:\n" + reply);
            }

            if (!reply.contains("seconds")) {
                return CheckResult.wrong("Your output does not contain \"seconds\", but should." +
                    "\n\nYour output:\n" + reply);
            }

            return CheckResult.correct();
        }

        @BeforeClass
        public static void setLargeContent() {

            StringBuilder content = new StringBuilder();

            for (int i = 0; i< 6000; i++) {
                content.append("%PDF");
            }

            content.append("%PDF-");
            largeContent = content.toString();
        }
    }
  learner_created: false
- name: test/NaiveSearch.java
  visible: false
  text: |2


    public class NaiveSearch {
        public static long searchForPattern(String[] args) {
            String pattern = args[1];
            String fileContent = args[0];
            long timeStart = System.nanoTime();
            if (naiveSearch(fileContent, pattern)) {
                return System.nanoTime() - timeStart;
            }
            return 0;
        }


        public static boolean naiveSearch (String text, String pattern) {
            int textLength = text.length();
            int patternLength = pattern.length();
            for (int i = 0; i<textLength - patternLength + 1; i++) {
                for (int j = 0; j< patternLength; j++) {
                    if (!(text.charAt(i+j) == pattern.charAt(j))) {
                        break;
                    }
                    else if (j == patternLength -1) return true;
                }
            }
            return false;
        }
    }
  learner_created: false
- name: test/FileTypeAnalyzerTest.java
  visible: false
  text: |2

    import analyzer.Main;
    import org.hyperskill.hstest.stage.StageTest;
    import org.hyperskill.hstest.testcase.CheckResult;
    import org.hyperskill.hstest.testcase.TestCase;

    import java.util.List;

    class Clue {
        String response;
        String feedback;

        Clue(String response, String feedback) {
            this.response = response;
            this.feedback = feedback;
        }
    }

    public class FileTypeAnalyzerTest extends StageTest<Clue> {
        public FileTypeAnalyzerTest() {
            super(Main.class);
        }

        @Override
        public List<TestCase<Clue>> generate() {
            return List.of(
                new TestCase<Clue>()
                    .addArguments(new String[]
                        {"doc.pdf", "%PDF-", "PDF document"})
                    .addFile("doc.pdf", "PFDF%PDF-PDF")
                    .setAttach(new Clue("PDF document", "The file had following content: " +
                        "PFDF%PDF-PDF and was analyzed for pattern %PDF-")),

                new TestCase<Clue>()
                    .addArguments(new String[]
                        {"doc.txt", "%PDF-", "PDF document"})
                    .addFile("doc.txt", "PFDF%PDF-PDF")
                    .setAttach(new Clue("PDF document", "The file had following content: " +
                        "PFDF%PDF-PDF and was analyzed for pattern %PDF-")),

                new TestCase<Clue>()
                    .addArguments(new String[]
                        {"doc.pdf", "%PDF-", "PDF document"})
                    .addFile("doc.pdf", "PFDFPDF")
                    .setAttach(new Clue("Unknown file type", "The file had following content: " +
                        "PFDFPDF and was analyzed for pattern %PDF-")),

                new TestCase<Clue>()
                    .addArguments(new String[]
                        {"doc.txt", "%PDF-", "PDF document"})
                    .addFile("doc.txt", "PFDFPDF")
                    .setAttach(new Clue("Unknown file type", "The file had following content: " +
                        "PFDFPDF and was analyzed for pattern %PDF-")),



                new TestCase<Clue>()
                    .addArguments(new String[]
                        {"doc.pdf", "%DOC-", "DOC document"})
                    .addFile("doc.pdf", "PFDF%DOC-PDF")
                    .setAttach(new Clue("DOC document", "The file had following content: " +
                        "PFDF%PDF-PDF and was analyzed for pattern %PDF-")),

                new TestCase<Clue>()
                    .addArguments(new String[]
                        {"doc.txt", "%DOC-", "DOC document"})
                    .addFile("doc.txt", "PFDF%DOC-PDF")
                    .setAttach(new Clue("DOC document", "")),

                new TestCase<Clue>()
                    .addArguments(new String[]
                        {"doc.pdf", "%DOC-", "DOC document"})
                    .addFile("doc.pdf", "PFDFPDF")
                    .setAttach(new Clue("Unknown file type", "")),

                new TestCase<Clue>()
                    .addArguments(new String[]
                        {"doc.txt", "%DOC-", "DOC document"})
                    .addFile("doc.txt", "PFDFPDF")
                    .setAttach(new Clue("Unknown file type", ""))
            );
        }

        @Override
        public CheckResult check(String reply, Clue clue) {
            String actual = reply.strip();
            String expected = clue.response.strip();
            return new CheckResult(actual.equals(expected),
                clue.feedback + "\nExpected result: " + expected +
                    "\nActual result: " + actual);
        }
    }
  learner_created: false
- name: src/analyzer/Main.java
  visible: true
  learner_created: true
- name: src/analyzer/SearchContext.java
  visible: true
  learner_created: true
- name: src/analyzer/KMP_Algorithm.java
  visible: true
  learner_created: true
- name: src/analyzer/NaiveAlgorithm.java
  visible: true
  learner_created: true
- name: src/analyzer/SearchAlgorithm.java
  visible: true
  learner_created: true
- name: src/analyzer/SearchSource.java
  visible: true
  learner_created: true
feedback_link: https://hyperskill.org/projects/64/stages/344/implement
status: Solved
feedback:
  message: Congratulations! Continue on <a href="https://hyperskill.org/projects/64/stages/344/implement">JetBrains
    Academy</a>
  time: Tue, 21 Jul 2020 18:34:53 UTC
record: 2
